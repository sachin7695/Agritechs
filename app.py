import numpy as np
from flask import Flask, request, jsonify, render_template, url_for
import pickle
import math
from werkzeug.utils import secure_filename
from gevent.pywsgi import WSGIServer

app = Flask(__name__)
model = pickle.load(open('/home/sachin269/Downloads/CROP_PRED_HACK_CBS/final_yeild_model_pickle.pkl','rb'))


@app.route('/')
def home():
    #return 'Hello World'
    return render_template('home.html')
    #return render_template('index.html')

@app.route('/predict',methods = ['POST'])
def predict():
    dist_name = request.form["District Name"]
    crop_year = request.form["Crop Year"]
    season = request.form["Season"]
    crop = request.form["Type of Crop"]
    area = request.form["Area"]
    production = request.form["Production"]
    # label encoding code block in form dictionary 
    district_dict = {'AMRAVATI': 19,
 'LAKHIMPUR': 345,
 'CHAMARAJANAGAR': 104,
 'KURNOOL': 340,
 'RAIPUR': 476,
 'KARAIKAL': 290,
 'KANNAUJ': 284,
 'COOCHBEHAR': 127,
 'JHALAWAR': 264,
 'GUNTUR': 217,
 'MAHASAMUND': 365,
 'DAMOH': 132,
 'RAIGARH': 475,
 'PRATAPGARH': 464,
 'MAHBUBNAGAR': 366,
 'GOPALGANJ': 212,
 'PANCHKULA': 443,
 'UDUPI': 606,
 'MANDI': 376,
 'ALIGARH': 11,
 'LAKHISARAI': 346,
 'TUMKUR': 600,
 'CHANGLANG': 113,
 'GUNA': 216,
 'DANTEWADA': 134,
 'HATHRAS': 229,
 'RAICHUR': 473,
 'OSMANABAD': 435,
 'SHRAVASTI': 538,
 'ARARIA': 29,
 'CHANDAULI': 109,
 'CACHAR': 103,
 'KHORDHA': 312,
 'NICOBARS': 427,
 'MEDINIPUR EAST': 386,
 'GHAZIPUR': 204,
 'MURSHIDABAD': 400,
 'DHARWAD': 151,
 'BARWANI': 65,
 'AMBALA': 16,
 'MEDINIPUR WEST': 387,
 'KHERI': 311,
 'PAKUR': 436,
 'DEORIA': 144,
 'UDAIPUR': 602,
 'PURI': 469,
 'KANPUR NAGAR': 288,
 'PANNA': 445,
 'ANJAW': 26,
 'NAYAGARH': 425,
 'SATNA': 520,
 'BALANGIR': 43,
 'JHABUA': 262,
 'DEWAS': 145,
 'KATIHAR': 301,
 'MAHOBA': 370,
 'BAGHPAT': 39,
 'KENDUJHAR': 305,
 'BIRBHUM': 92,
 'SOLAPUR': 554,
 'RAMPUR': 487,
 'KHAMMAM': 307,
 'KHOWAI': 313,
 'GAYA': 202,
 'MOGA': 391,
 'SANGLI': 513,
 'PANIPAT': 444,
 'SIWAN': 552,
 'BEGUSARAI': 70,
 'MARIGAON': 381,
 'PURULIA': 471,
 'PATAN': 449,
 'CHAMPAWAT': 107,
 'PALI': 440,
 'TIRUNELVELI': 595,
 'MEDAK': 385,
 'PILIBHIT': 458,
 'SIVASAGAR': 551,
 'JODHPUR': 269,
 'KALAHANDI': 277,
 'CHANDRAPUR': 112,
 'DAVANGERE': 140,
 'DHOLPUR': 154,
 'RANGAREDDI': 489,
 'NARSINGHPUR': 420,
 'BHAGALPUR': 77,
 'HOWRAH': 237,
 'JABALPUR': 243,
 'THOUBAL': 589,
 'BANGALORE RURAL': 52,
 'IMPHAL WEST': 241,
 'JASHPUR': 259,
 'VIZIANAGARAM': 626,
 'ROHTAS': 498,
 'DEHRADUN': 141,
 'PANCH MAHALS': 442,
 'SIVAGANGA': 550,
 'SHIVPURI': 536,
 'ETAWAH': 181,
 'GADAG': 192,
 'SAHARSA': 505,
 'PALAKKAD': 437,
 'EAST GODAVARI': 172,
 'FATEHPUR': 188,
 'HARDOI': 226,
 '24 PARAGANAS NORTH': 0,
 'FIROZABAD': 190,
 'GUMLA': 215,
 'CHHATARPUR': 115,
 'EAST DISTRICT': 170,
 'CUTTACK': 129,
 'BIKANER': 90,
 'UNNAO': 612,
 'DINDORI': 164,
 'HAVERI': 230,
 'KOTTAYAM': 333,
 'GULBARGA': 214,
 'KAUSHAMBI': 303,
 'ADILABAD': 2,
 'DARRANG': 137,
 'BILASPUR': 91,
 'DIMA HASAO': 159,
 'BANKURA': 54,
 'JALGAON': 250,
 'BAGALKOT': 37,
 'PURBI CHAMPARAN': 468,
 'BONGAIGAON': 95,
 'DURG': 169,
 'NASHIK': 421,
 'KARIMNAGAR': 295,
 'HAILAKANDI': 221,
 'SUKMA': 569,
 'LALITPUR': 347,
 'BARABANKI': 56,
 'THIRUVANANTHAPURAM': 587,
 'NAWANSHAHR': 424,
 '24 PARAGANAS SOUTH': 1,
 'PASHCHIM CHAMPARAN': 448,
 'AURANGABAD': 34,
 'MAHARAJGANJ': 364,
 'KORBA': 330,
 'EAST GARO HILLS': 171,
 'KHEDA': 310,
 'HAMIRPUR': 222,
 'JAMUI': 257,
 'JALAUN': 249,
 'SONIPAT': 557,
 'NALGONDA': 413,
 'SEONI': 524,
 'MOKOKCHUNG': 392,
 'DAUSA': 139,
 'BANKA': 53,
 'ZUNHEBOTO': 645,
 'MAINPURI': 371,
 'CHITRADURGA': 120,
 'SRIKAKULAM': 567,
 'AHMADABAD': 5,
 'KAIMUR (BHABUA)': 275,
 'ANANTAPUR': 24,
 'KENDRAPARA': 304,
 'KHAGARIA': 306,
 'BARGARH': 61,
 'TINSUKIA': 592,
 'NAGAON': 406,
 'BARAMULLA': 57,
 'SINDHUDURG': 543,
 'GANDHINAGAR': 196,
 'AZAMGARH': 35,
 'DINAJPUR UTTAR': 162,
 'GANJAM': 198,
 'NAWADA': 423,
 'KOTA': 332,
 'JORHAT': 270,
 'SEHORE': 522,
 'VELLORE': 621,
 'SONBHADRA': 555,
 'BUNDI': 100,
 'RAYAGADA': 492,
 'TONK': 598,
 'MADURAI': 363,
 'BIJNOR': 89,
 'PARBHANI': 447,
 'WASHIM': 629,
 'PATHANAMTHITTA': 450,
 'BARPETA': 64,
 'UJJAIN': 607,
 'ALWAR': 15,
 'BASTI': 67,
 'BETUL': 75,
 'JAIPUR': 245,
 'ANUGUL': 27,
 'BENGALURU URBAN': 74,
 'RAMANATHAPURAM': 484,
 'HISAR': 233,
 'GANGANAGAR': 197,
 'RAMANAGARA': 483,
 'KARIMGANJ': 294,
 'JAMNAGAR': 255,
 'BHADRAK': 76,
 'RATLAM': 490,
 'NAMAKKAL': 414,
 'AGRA': 4,
 'VAISHALI': 618,
 'SURGUJA': 576,
 'NEEMUCH': 426,
 'MANDLA': 377,
 'CHIKBALLAPUR': 117,
 'KANPUR DEHAT': 287,
 'AJMER': 8,
 'KACHCHH': 273,
 'CHIKMAGALUR': 118,
 'SAMBALPUR': 511,
 'MUZAFFARPUR': 402,
 'KOZHIKODE': 334,
 'SAMASTIPUR': 509,
 'CHITTORGARH': 123,
 'MADHUBANI': 362,
 'WEST KHASI HILLS': 636,
 'JALNA': 251,
 'RAJKOT': 480,
 'WEST GODAVARI': 633,
 'MORADABAD': 394,
 'UTTAR KANNAD': 615,
 'BHILWARA': 82,
 'KHANDWA': 308,
 'ASHOKNAGAR': 32,
 'DARBHANGA': 135,
 'CHAMOLI': 106,
 'GHAZIABAD': 203,
 'UMARIA': 609,
 'THANE': 582,
 'KARBI ANGLONG': 292,
 'MALAPPURAM': 372,
 'KONDAGAON': 327,
 'BARAN': 58,
 'KUSHI NAGAR': 343,
 'MORENA': 395,
 'BELLARY': 72,
 'PEREN': 456,
 'NABARANGPUR': 404,
 'MAHESANA': 369,
 'SHAJAPUR': 529,
 'KARAULI': 291,
 'HARIDWAR': 227,
 'WARANGAL': 627,
 'PITHORAGARH': 459,
 'IDUKKI': 239,
 'EAST KAMENG': 174,
 'UDAM SINGH NAGAR': 604,
 'THIRUVALLUR': 586,
 'NARAYANPUR': 418,
 'IMPHAL EAST': 240,
 'MAYURBHANJ': 384,
 'VILLUPURAM': 623,
 'BHANDARA': 78,
 'UNA': 610,
 'WOKHA': 640,
 'JUNAGADH': 271,
 'MUNGER': 399,
 'SHIMOGA': 535,
 'DIBANG VALLEY': 157,
 'ANAND': 23,
 'SATARA': 519,
 'NAGAPATTINAM': 407,
 'MUZAFFARNAGAR': 401,
 'PATNA': 453,
 'MAU': 383,
 'AMBEDKAR NAGAR': 17,
 'BARMER': 62,
 'SUNDARGARH': 571,
 'KOKRAJHAR': 322,
 'MAHENDRAGARH': 368,
 'KANKER': 283,
 'BEED': 69,
 'BARDHAMAN': 59,
 'GONDA': 210,
 'EAST JAINTIA HILLS': 173,
 'BIDAR': 87,
 'JANJGIR-CHAMPA': 258,
 'BASTAR': 66,
 'LUNGLEI': 360,
 'KATNI': 302,
 'SIKAR': 541,
 'GOLAGHAT': 208,
 'KISHANGANJ': 317,
 'KOPPAL': 328,
 'DAKSHIN KANNAD': 131,
 'NAGAUR': 408,
 'DIBRUGARH': 158,
 'VADODARA': 617,
 'NAINITAL': 410,
 'HASSAN': 228,
 'ALIRAJPUR': 12,
 'DHAMTARI': 147,
 'YADGIR': 641,
 'SURAT': 574,
 'RATNAGIRI': 491,
 'KHARGONE': 309,
 'SANGRUR': 514,
 'THANJAVUR': 583,
 'KANNUR': 286,
 'PUDUKKOTTAI': 465,
 'TEHRI GARHWAL': 581,
 'SURAJPUR': 573,
 'PALAMU': 438,
 'GODDA': 207,
 'SHAHJAHANPUR': 528,
 'BELGAUM': 71,
 'DEOGARH': 142,
 'GARIYABAND': 200,
 'PRAKASAM': 463,
 'NALBARI': 412,
 'NADIA': 405,
 'LOHARDAGA': 352,
 'SIROHI': 546,
 'KOLLAM': 326,
 'SIRSA': 547,
 'ALLAHABAD': 13,
 'SOUTH GARO HILLS': 561,
 'BOUDH': 96,
 'CHITTOOR': 122,
 'HARDA': 225,
 'LOWER DIBANG VALLEY': 356,
 'PAURI GARHWAL': 454,
 'JAJAPUR': 247,
 'BUDAUN': 97,
 'BATHINDA': 68,
 'SULTANPUR': 570,
 'SARAN': 518,
 'BHOPAL': 86,
 'FARRUKHABAD': 185,
 'FIROZEPUR': 191,
 'SAIHA': 507,
 'SANT KABEER NAGAR': 515,
 'JALORE': 252,
 'MIRZAPUR': 390,
 'AMROHA': 22,
 'KABIRDHAM': 272,
 'DATIA': 138,
 'GWALIOR': 220,
 'UNAKOTI': 611,
 'JALPAIGURI': 253,
 'PERAMBALUR': 455,
 'SONEPUR': 556,
 'SABAR KANTHA': 502,
 'SINGRAULI': 544,
 'SITAMARHI': 548,
 'BALODA BAZAR': 47,
 'BANDA': 50,
 'KIPHIRE': 316,
 'RUDRA PRAYAG': 499,
 'FARIDKOT': 184,
 'JHANSI': 265,
 'KORAPUT': 329,
 'GADCHIROLI': 193,
 'LOHIT': 353,
 'DIMAPUR': 160,
 'BHAVNAGAR': 81,
 'BHOJPUR': 85,
 'AURAIYA': 33,
 'POONCH': 461,
 'CHIRANG': 119,
 'NUAPADA': 434,
 'SAHARANPUR': 504,
 'SUPAUL': 572,
 'LUCKNOW': 358,
 'LATUR': 349,
 'EAST KHASI HILLS': 175,
 'KASGANJ': 299,
 'SIDHI': 540,
 'JAISALMER': 246,
 'GOALPARA': 206,
 'SALEM': 508,
 'VISAKHAPATANAM': 625,
 'DHAR': 149,
 'SIDDHARTH NAGAR': 539,
 'JAUNPUR': 260,
 'HOSHANGABAD': 235,
 'VIRUDHUNAGAR': 624,
 'KATHUA': 300,
 'KOHIMA': 321,
 'CUDDALORE': 128,
 'BALESHWAR': 44,
 'MYSORE': 403,
 'VARANASI': 620,
 'TUTICORIN': 601,
 'TAPI': 578,
 'KANDHAMAL': 281,
 'NORTH TRIPURA': 433,
 'LOWER SUBANSIRI': 357,
 'DINDIGUL': 163,
 'NAVSARI': 422,
 'LUDHIANA': 359,
 'HAZARIBAGH': 231,
 'BAHRAICH': 40,
 'BALAGHAT': 42,
 'SHEIKHPURA': 531,
 'WEST TRIPURA': 639,
 'MEERUT': 388,
 'MADHEPURA': 361,
 'KANGRA': 282,
 'BHARUCH': 80,
 'YAVATMAL': 644,
 'WEST DISTRICT': 631,
 'DADRA AND NAGAR HAVELI': 130,
 'BAKSA': 41,
 'RAISEN': 477,
 'GONDIA': 211,
 'THRISSUR': 590,
 'DHEMAJI': 152,
 'PATIALA': 452,
 'NORTH AND MIDDLE ANDAMAN': 429,
 'AKOLA': 9,
 'BALRAMPUR': 48,
 'WAYANAD': 630,
 'MANSA': 380,
 'KAMRUP': 278,
 'ALAPPUZHA': 10,
 'FAIZABAD': 182,
 'BUXAR': 102,
 'DOHAD': 166,
 'THIRUVARUR': 588,
 'KANCHIPURAM': 280,
 'RAJSAMAND': 482,
 'KRISHNAGIRI': 336,
 'PURNIA': 470,
 'BULANDSHAHR': 98,
 'MALDAH': 373,
 'CHITRAKOOT': 121,
 'GURDASPUR': 218,
 'BULDHANA': 99,
 'MUKTSAR': 396,
 'PONDICHERRY': 460,
 'BIJAPUR': 88,
 'DINAJPUR DAKSHIN': 161,
 'CHAMBA': 105,
 'KARNAL': 296,
 'AIZAWL': 7,
 'SOLAN': 553,
 'UKHRUL': 608,
 'NANDURBAR': 417,
 'GORAKHPUR': 213,
 'THE NILGIRIS': 584,
 'DHENKANAL': 153,
 'NALANDA': 411,
 'UTTAR KASHI': 616,
 'KURUNG KUMEY': 342,
 'SERCHHIP': 526,
 'TIRAP': 593,
 'ETAH': 180,
 'MALKANGIRI': 374,
 'KINNAUR': 315,
 'ERODE': 179,
 'GAJAPATI': 194,
 'BANSWARA': 55,
 'WEST KAMENG': 635,
 'THENI': 585,
 'SHEOHAR': 532,
 'BURHANPUR': 101,
 'SAMBHAL': 512,
 'DUNGARPUR': 168,
 'KRISHNA': 335,
 'KURUKSHETRA': 341,
 'TIRUCHIRAPPALLI': 594,
 'BALLIA': 45,
 'RAJGARH': 479,
 'NANDED': 416,
 'FATEHABAD': 186,
 'PUNE': 467,
 'KARUR': 297,
 'KADAPA': 274,
 'SOUTH ANDAMANS': 559,
 'LONGLENG': 355,
 'SIRMAUR': 545,
 'SAWAI MADHOPUR': 521,
 'WEST GARO HILLS': 632,
 'SONITPUR': 558,
 'REWA': 494,
 'KODAGU': 319,
 'CHHINDWARA': 116,
 'BHIWANI': 84,
 'TIRUVANNAMALAI': 597,
 'SHAHDOL': 527,
 'SOUTH GOA': 562,
 'KOREA': 331,
 'AMRITSAR': 21,
 'SANT RAVIDAS NAGAR': 516,
 'TIKAMGARH': 591,
 'UDHAMPUR': 605,
 'VIDISHA': 622,
 'KAITHAL': 276,
 'BHIND': 83,
 'KOLHAPUR': 325,
 'BARNALA': 63,
 'NIZAMABAD': 428,
 'VALSAD': 619,
 'DHARMAPURI': 150,
 'HANUMANGARH': 223,
 'HOOGHLY': 234,
 'MON': 393,
 'PORBANDAR': 462,
 'UPPER SIANG': 613,
 'RAE BARELI': 472,
 'TUENSANG': 599,
 'MANDSAUR': 378,
 'HINGOLI': 232,
 'DHULE': 156,
 'EAST SINGHBUM': 177,
 'CHURU': 125,
 'NARMADA': 419,
 'JEHANABAD': 261,
 'SOUTH WEST GARO HILLS': 564,
 'AHMEDNAGAR': 6,
 'COIMBATORE': 126,
 'SAHEBGANJ': 506,
 'RAIGAD': 474,
 'CHAMPHAI': 108,
 'KULLU': 338,
 'DHANBAD': 148,
 'SHIMLA': 534,
 'KASARAGOD': 298,
 'DANG': 133,
 'MEWAT': 389,
 'KOLASIB': 324,
 'MATHURA': 382,
 'INDORE': 242,
 'ANUPPUR': 28,
 'NORTH GARO HILLS': 431,
 'BADGAM': 36,
 'JAGATSINGHAPUR': 244,
 'BALOD': 46,
 'SURENDRANAGAR': 575,
 'KAMRUP METRO': 279,
 'MUNGELI': 398,
 'BAREILLY': 60,
 'FARIDABAD': 183,
 'UDALGURI': 603,
 'BHARATPUR': 79,
 'JHAJJAR': 263,
 'SAGAR': 503,
 'DARJEELING': 136,
 'WARDHA': 628,
 'MANDYA': 379,
 'NORTH GOA': 432,
 'RUPNAGAR': 500,
 'GAUTAM BUDDHA NAGAR': 201,
 'DHALAI': 146,
 'SRINAGAR': 568,
 'SITAPUR': 549,
 'LAWNGTLAI': 350,
 'SPSR NELLORE': 566,
 'SENAPATI': 523,
 'SHEOPUR': 533,
 'RI BHOI': 496,
 'BANAS KANTHA': 49,
 'YAMUNANAGAR': 642,
 'LEH LADAKH': 351,
 'JHUNJHUNU': 267,
 'NAGPUR': 409,
 'JAMMU': 254,
 'DUMKA': 167,
 'TAMENGLONG': 577,
 'CHURACHANDPUR': 124,
 'KISHTWAR': 318,
 'ERNAKULAM': 178,
 'PHEK': 457,
 'KULGAM': 337,
 'KOLAR': 323,
 'ARWAL': 31,
 'SOUTH TRIPURA': 563,
 'PATHANKOT': 451,
 'WEST SIANG': 637,
 'RAJAURI': 478,
 'HOSHIARPUR': 236,
 'BAGESHWAR': 38,
 'PAPUM PARE': 446,
 'DODA': 165,
 'SHAMLI': 530,
 'BISHNUPUR': 93,
 'ALMORA': 14,
 'CHANDIGARH': 111,
 'SOUTH DISTRICT': 560,
 'JHARSUGUDA': 266,
 'RAJNANDGAON': 481,
 'DEOGHAR': 143,
 'AMRELI': 20,
 'TAWANG': 580,
 'DHUBRI': 155,
 'NORTH DISTRICT': 430,
 'KANNIYAKUMARI': 285,
 'ROHTAK': 497,
 'KARGIL': 293,
 'REWARI': 495,
 'CHANDEL': 110,
 'GURGAON': 219,
 'EAST SIANG': 176,
 'KAPURTHALA': 289,
 'SEPAHIJALA': 525,
 'FATEHGARH SAHIB': 187,
 'KUPWARA': 339,
 'LAHUL AND SPITI': 344,
 'JIND': 268,
 'BEMETARA': 73,
 'JALANDHAR': 248,
 'YANAM': 643,
 'S.A.S NAGAR': 501,
 'TIRUPPUR': 596,
 'PALWAL': 441,
 'GOMATI': 209,
 'TARN TARAN': 579,
 'GIRIDIH': 205,
 'WEST JAINTIA HILLS': 634,
 'MAHE': 367,
 'UPPER SUBANSIRI': 614,
 'SARAIKELA KHARSAWAN': 517,
 'JAMTARA': 256,
 'WEST SINGHBHUM': 638,
 'CHATRA': 114,
 'PALGHAR': 439,
 'SAMBA': 510,
 'MAMIT': 375,
 'LATEHAR': 348,
 'SIMDEGA': 542,
 'HAPUR': 224,
 'RANCHI': 488,
 'AMETHI': 18,
 'ARIYALUR': 30,
 'ANANTNAG': 25,
 'GANDERBAL': 195,
 'RAMBAN': 485,
 'FAZILKA': 189,
 'KODERMA': 320,
 'PULWAMA': 466,
 'REASI': 493,
 'GARHWA': 199,
 'AGAR MALWA': 3,
 'SOUTH WEST KHASI HILLS': 565,
 'SHOPIAN': 537,
 'BOKARO': 94,
 'BANDIPORA': 51,
 'KHUNTI': 314,
 'LONGDING': 354,
 'HYDERABAD': 238,
 'RAMGARH': 486,
 'MUMBAI': 397,
 'NAMSAI': 415} 

    crop_dict = {'Moong(Green Gram)': 63,
 'Rice': 95,
 'Garlic': 39,
 'Jowar': 48,
 'Other  Rabi pulses': 69,
 'Masoor': 61,
 'Sugarcane': 106,
 'Dry chillies': 37,
 'Dry ginger': 38,
 'Horse-gram': 45,
 'Gram': 41,
 'Banana': 7,
 'Potato': 87,
 'Coconut ': 28,
 'Barley': 8,
 'Maize': 59,
 'Oilseeds total': 66,
 'Sannhamp': 100,
 'Coriander': 32,
 'Bajra': 6,
 'Urad': 116,
 'Sesamum': 102,
 'Cashewnut': 22,
 'Groundnut': 43,
 'Cotton(lint)': 33,
 'Arhar/Tur': 3,
 'Sunflower': 107,
 'Wheat': 119,
 'Sweet potato': 108,
 'Onion': 67,
 'Rapeseed &Mustard': 92,
 'Soyabean': 105,
 'Linseed': 57,
 'Turmeric': 114,
 'Jute': 49,
 'Other Vegetables': 75,
 'Tobacco': 111,
 'Castor seed': 25,
 'Small millets': 103,
 'Tapioca': 109,
 'Ragi': 90,
 'Peas & beans (Pulses)': 81,
 'Niger seed': 65,
 'Mesta': 62,
 'Mango': 60,
 'Arecanut': 2,
 'Khesari': 52,
 'Other Kharif pulses': 74,
 'Guar seed': 44,
 'Citrus Fruit': 27,
 'Samai': 99,
 'Ginger': 40,
 'Total foodgrain': 113,
 'Sapota': 101,
 'Brinjal': 18,
 'Tomato': 112,
 'Black pepper': 15,
 'Cowpea(Lobia)': 34,
 'Cardamom': 20,
 'Grapes': 42,
 'other oilseeds': 123,
 'Moth': 64,
 'Cabbage': 19,
 'Other Fresh Fruits': 73,
 'Pulses total': 88,
 'Bhindi': 13,
 'Rubber': 97,
 'Paddy': 76,
 'Safflower': 98,
 'Lab-Lab': 54,
 'Ber': 12,
 'Orange': 68,
 'Other Cereals & Millets': 70,
 'Korra': 53,
 'Beans & Mutter(Vegetable)': 10,
 'Varagu': 117,
 'Bitter Gourd': 14,
 'other misc. pulses': 122,
 'Drum Stick': 36,
 'Other Citrus Fruit': 71,
 'Turnip': 115,
 'Papaya': 77,
 'Water Melon': 118,
 'Pineapple': 83,
 'Lemon': 55,
 'Pome Fruit': 85,
 'Jack Fruit': 46,
 'Pump Kin': 89,
 'Blackgram': 16,
 'Kapas': 51,
 'Peas  (vegetable)': 80,
 'Snak Guard': 104,
 'Cauliflower': 26,
 'Rajmash Kholar': 91,
 'Cashewnut Raw': 24,
 'Cond-spcs other': 31,
 'Yam': 120,
 'Jobster': 47,
 'Jute & mesta': 50,
 'Ricebean (nagadal)': 96,
 'Tea': 110,
 'Cucumber': 35,
 'Bottle Gourd': 17,
 'Carrot': 21,
 'Bean': 9,
 'Redish': 93,
 'Pome Granet': 86,
 'Ash Gourd': 4,
 'other fibres': 121,
 'Beet Root': 11,
 'Colocosia': 30,
 'Arcanut (Processed)': 1,
 'Ribed Guard': 94,
 'Pear': 79,
 'Lentil': 56,
 'Coffee': 29,
 'Cashewnut Processed': 23,
 'Atcanut (Raw)': 5,
 'Litchi': 58,
 'Plums': 84,
 'Peach': 78,
 'Perilla': 82,
 'Apple': 0,
 'Other Dry Fruit': 72}
    
    _season_dict = {'Kharif     ': 1, 'Winter     ': 5, 'Whole Year ': 4, 'Rabi       ': 2, 'Autumn     ': 0, 'Summer     ': 3}
    season_dict={key.replace(" ",""):value
                   for key,value in _season_dict.items()
                   }
    # print(season_dict)
    district = district_dict[dist_name.upper()]
    season = season_dict[season]
    crop = crop_dict[crop]
    # ###########################################


    input_list = [district, crop_year, season, crop, area, production]
    arr = np.array(input_list)
    prediction = model.predict(arr.reshape(1,-1))
    print(prediction[0])

    #output = round(prediction[0], 2)
    # return render_template('home.html', prediction_text="AQI for Jaipur {}".format(prediction[0]))
    return render_template('home.html', prediction_text="Crop Yield is {}".format(prediction))




if __name__ == '__main__':
    # http_server = WSGIServer(('', 6000), app)
    # http_server.serve_forever()
    # app.run()
    app.run(debug=True)